<!DOCTYPE html>
<html>
    <head>
        <title>Superhero Language Learner</title>
    </head>
    <body>
        <h1>Log In</h1>
        <form>
            Email: <input type="text" id="email" name="email" placeholder="Email"/> <br />
            Password: <input type="password" id="password" name="password" placeholder="Password"/> <br />
            <button id="log-in-button">Log In</button>
        </form>
        <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyDASOXphdfPFUK6mdYDTlhqnXmu-WNJQZs",
                authDomain: "hacktech2018-4d204.firebaseapp.com",
                databaseURL: "https://hacktech2018-4d204.firebaseio.com",
                projectId: "hacktech2018-4d204",
                storageBucket: "hacktech2018-4d204.appspot.com",
                messagingSenderId: "88807207497"
            };
            firebase.initializeApp(config);
        </script>
        <script>
            // HANDLES LOG IN BUTTON CLICK
            function logIn() {
                if (firebase.auth().currentUser) {
                    // [START signout]
                    firebase.auth().signOut();
                    document.getElementById('log-in-button').textContent = 'Log In';
                    // [END signout]
                }
                else {
                    var email = document.getElementById('email').value;
                    var password = document.getElementById('password').value;
                    if (email.length < 4) {
                        alert('Please enter an email address.');
                        return;
                    }
                    if (password.length < 4) {
                        alert('Please enter a password.');
                        return;
                    }
                    // Sign in with email and pass.
                    // [START authwithemail]
                    firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                        // Handle Errors here.
                        var errorCode = error.code;
                        var errorMessage = error.message;
                        // [START_EXCLUDE]
                        if (errorCode === 'auth/wrong-password') {
                            alert('Your password was incorrect. Please try again.');
                        } else {
                            alert(errorMessage);
                        }
                        console.log(error);
                        document.getElementById('log-in-button').disabled = false;
                        // [END_EXCLUDE]
                    });
                    // [END authwithemail]
                }
            }
            
            /**
            * initApp handles setting up UI event listeners and registering Firebase auth listeners:
            *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
            *    out, and that is where we update the UI.
            */
            function initApp() {
                // Listening for auth state changes.
                // [START authstatelistener]
                firebase.auth().onAuthStateChanged(function(user) {
                    // [START_EXCLUDE silent]
                    // [END_EXCLUDE]
                    if (user) {
                        // User is signed in.
                        // [START_EXCLUDE]
                        document.getElementById('log-in-button').textContent = 'Log out';
                    } else {
                        // User is signed out.
                        // [START_EXCLUDE]
                        document.getElementById('log-in-button').textContent = 'Log in';
                        // [END_EXCLUDE]
                    }
                    // [START_EXCLUDE silent]
                    document.getElementById('log-in-button').disabled = false;
                    // [END_EXCLUDE]
                });
                // [END authstatelistener]
                document.getElementById('log-in-button').addEventListener('click', logIn, false);
            }
                window.onload = function() {
                initApp();
            };
        </script>
    </body>
</html>